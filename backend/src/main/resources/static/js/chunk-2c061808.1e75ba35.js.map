{"version":3,"sources":["webpack:///./src/views/WorkOrder/Update.vue?e646","webpack:///./src/plugins/ImageUpload/local.vue?de85","webpack:///src/plugins/ImageUpload/local.vue","webpack:///./src/plugins/ImageUpload/local.vue?9c5c","webpack:///./src/plugins/ImageUpload/local.vue","webpack:///src/views/WorkOrder/Update.vue","webpack:///./src/views/WorkOrder/Update.vue?147c","webpack:///./src/views/WorkOrder/Update.vue","webpack:///./src/plugins/ImageUpload/local.vue?d6f8","webpack:///./src/views/WorkOrder/Update.vue?9d00","webpack:///./src/utils/fileHelper.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","orderForm","orderFormRules","model","value","callback","$$v","$set","expression","staticStyle","_l","item","key","id","name","_v","on","$event","imgs","onSubmit","staticRenderFns","class","readonly","readonly1","fileList","length","limit","listType","upload","beforeUpload","handlePreview","handleRemove","_t","_e","slot","directives","rawName","percentage","initialIndex","closeViewer","previewList","cropperShow","handleClose","clipperOption","img","size","outputType","autoCrop","autoCropWidth","autoCropHeight","fixedBox","handleCropper","components","VueCropper","props","type","String","default","isClipper","Boolean","Number","defaultImagesFileData","Array","data","fileData","dialogVisible","outputSize","fileOption","isProgressShow","computed","watch","dataInit","n","$emit","mounted","methods","defaultImages","forEach","image","url","push","JSON","parse","stringify","list","$message","error","pop","originSize","$refs","uploadFiles","imageCompress","compressFile","then","imageClipper","handleUpload","file","fileUpload","Promise","mimeType","quality","success","resolve","result","reject","console","log","reader","readAsDataURL","newFile","onload","fileSize","fileUrl","fileObj","index","splice","cropper","getCropBlob","ele","oldFileName","i","component","ImageUpload","customerName","contactName","contactPhone","address","detailAdd","title","category","appointsTime","priority","content","label","deviceId","$route","query","device","validate","generateUUID","d","Date","getTime","window","performance","now","uuid","replace","getObjectURL","undefined","createObjectURL","URL","webkitURL"],"mappings":"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","file":"js/chunk-2c061808.1e75ba35.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mainPanel\"},[_c('el-form',{ref:\"orderForm\",attrs:{\"model\":_vm.orderForm,\"label-width\":\"120px\",\"rules\":_vm.orderFormRules}},[_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"客户名称：\",\"prop\":\"customerName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.orderForm.customerName),callback:function ($$v) {_vm.$set(_vm.orderForm, \"customerName\", $$v)},expression:\"orderForm.customerName\"}})],1)],1)],1),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"联系人：\",\"prop\":\"contactName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.orderForm.contactName),callback:function ($$v) {_vm.$set(_vm.orderForm, \"contactName\", $$v)},expression:\"orderForm.contactName\"}})],1)],1)],1),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"联系电话：\",\"prop\":\"contactPhone\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.orderForm.contactPhone),callback:function ($$v) {_vm.$set(_vm.orderForm, \"contactPhone\", $$v)},expression:\"orderForm.contactPhone\"}})],1)],1)],1),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"服务地址：\",\"prop\":\"address\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.orderForm.address),callback:function ($$v) {_vm.$set(_vm.orderForm, \"address\", $$v)},expression:\"orderForm.address\"}})],1)],1)],1),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"详细地址：\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.orderForm.detailAdd),callback:function ($$v) {_vm.$set(_vm.orderForm, \"detailAdd\", $$v)},expression:\"orderForm.detailAdd\"}})],1)],1)],1),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"工单标题：\",\"prop\":\"title\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.orderForm.title),callback:function ($$v) {_vm.$set(_vm.orderForm, \"title\", $$v)},expression:\"orderForm.title\"}})],1)],1)],1),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"服务项目：\",\"prop\":\"category\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.orderForm.category),callback:function ($$v) {_vm.$set(_vm.orderForm, \"category\", $$v)},expression:\"orderForm.category\"}})],1)],1)],1),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"选择设备：\",\"prop\":\"deviceId\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.orderForm.deviceId),callback:function ($$v) {_vm.$set(_vm.orderForm, \"deviceId\", $$v)},expression:\"orderForm.deviceId\"}},_vm._l((_vm.deviceList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1)],1)],1),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"预约时间：\",\"prop\":\"appointsTime\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"type\":\"datetime\",\"placeholder\":\"选择日期时间\"},model:{value:(_vm.orderForm.appointsTime),callback:function ($$v) {_vm.$set(_vm.orderForm, \"appointsTime\", $$v)},expression:\"orderForm.appointsTime\"}})],1)],1)],1),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"工单优先级：\",\"prop\":\"priority\"}},[_c('el-radio-group',{model:{value:(_vm.orderForm.priority),callback:function ($$v) {_vm.$set(_vm.orderForm, \"priority\", $$v)},expression:\"orderForm.priority\"}},[_c('el-radio',{attrs:{\"label\":\"一般\"}},[_vm._v(\"一般\")]),_c('el-radio',{attrs:{\"label\":\"紧急\"}},[_vm._v(\"紧急\")]),_c('el-radio',{attrs:{\"label\":\"非常紧急\"}},[_vm._v(\"非常紧急\")])],1)],1)],1)],1),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"详细描述：\",\"prop\":\"content\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"type\":\"textarea\"},model:{value:(_vm.orderForm.content),callback:function ($$v) {_vm.$set(_vm.orderForm, \"content\", $$v)},expression:\"orderForm.content\"}})],1)],1)],1),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"图片描述：\"}},[_c('ImageUpload',{on:{\"change\":function($event){_vm.orderForm.imgs = $event}}})],1)],1)],1),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"工单标签：\"}},[_c('el-checkbox-group',{model:{value:(_vm.orderForm.label),callback:function ($$v) {_vm.$set(_vm.orderForm, \"label\", $$v)},expression:\"orderForm.label\"}},[_c('el-checkbox',{attrs:{\"label\":\"厦门\"}}),_c('el-checkbox',{attrs:{\"label\":\"已结款\"}}),_c('el-checkbox',{attrs:{\"label\":\"未结款\"}}),_c('el-checkbox',{attrs:{\"label\":\"已收预付款\"}}),_c('el-checkbox',{attrs:{\"label\":\"已付款\"}})],1)],1)],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"立即创建\")]),_c('el-button',[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-upload',{ref:\"upload\",class:{readonly: _vm.readonly,readonly1: _vm.fileList.length >= _vm.limit},attrs:{\"list-type\":_vm.listType,\"action\":\"\",\"accept\":\"image/*\",\"multiple\":\"\",\"file-list\":_vm.fileList,\"http-request\":_vm.upload,\"before-upload\":_vm.beforeUpload,\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove}},[(_vm.listType === 'text')?[_vm._t(\"default\",function(){return [_c('el-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\"图片上传\")])]})]:_vm._e(),(_vm.listType === 'picture-card')?[_c('i',{staticClass:\"el-icon-plus\",attrs:{\"slot\":\"default\"},slot:\"default\"})]:_vm._e()],2),_c('el-progress',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isProgressShow),expression:\"isProgressShow\"}],attrs:{\"percentage\":_vm.percentage}}),(_vm.dialogVisible)?_c('el-image-viewer',{attrs:{\"initial-index\":_vm.initialIndex,\"on-close\":_vm.closeViewer,\"url-list\":_vm.previewList,\"z-index\":10000}}):_vm._e(),_c('el-dialog',{staticClass:\"cropper-dialog\",attrs:{\"title\":\"图片裁剪\",\"top\":\"5%\",\"visible\":_vm.cropperShow},on:{\"update:visible\":function($event){_vm.cropperShow=$event},\"close\":_vm.handleClose}},[_c('div',{staticClass:\"cropper-content\"},[_c('div',{staticClass:\"cropper\"},[_c('vueCropper',{ref:\"cropper\",attrs:{\"img\":_vm.clipperOption.img,\"output-size\":_vm.clipperOption.size,\"output-type\":_vm.clipperOption.outputType,\"info\":true,\"auto-crop\":_vm.clipperOption.autoCrop,\"auto-crop-width\":_vm.clipperOption.autoCropWidth,\"auto-crop-height\":_vm.clipperOption.autoCropHeight,\"fixed-box\":_vm.clipperOption.fixedBox}})],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.cropperShow = false}}},[_vm._v(\"关闭\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.handleCropper}},[_vm._v(\"确定\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-upload\n      ref=\"upload\"\n      :class=\"{readonly: readonly,readonly1: fileList.length >= limit}\"\n      :list-type=\"listType\"\n      action\n      accept=\"image/*\"\n      multiple\n      :file-list=\"fileList\"\n      :http-request=\"upload\"\n      :before-upload=\"beforeUpload\"\n      :on-preview=\"handlePreview\"\n      :on-remove=\"handleRemove\"\n    >\n      <!-- 默认显示按钮 根据参数显示其他的形态 -->\n      <template v-if=\"listType === 'text'\">\n        <slot>\n          <el-button type=\"primary\">图片上传</el-button>\n        </slot>\n      </template>\n\n      <template v-if=\"listType === 'picture-card'\">\n        <i slot=\"default\" class=\"el-icon-plus\" />\n      </template>\n    </el-upload>\n    <el-progress v-show=\"isProgressShow\" :percentage=\"percentage\" />\n    <!-- 图片预览 -->\n    <el-image-viewer v-if=\"dialogVisible\" :initial-index=\"initialIndex\" :on-close=\"closeViewer\" :url-list=\"previewList\" :z-index=\"10000\" />\n\n    <el-dialog title=\"图片裁剪\" class=\"cropper-dialog\" top=\"5%\" :visible.sync=\"cropperShow\" @close=\"handleClose\">\n      <div class=\"cropper-content\">\n        <div class=\"cropper\">\n          <vueCropper\n            ref=\"cropper\"\n            :img=\"clipperOption.img\"\n            :output-size=\"clipperOption.size\"\n            :output-type=\"clipperOption.outputType\"\n            :info=\"true\"\n            :auto-crop=\"clipperOption.autoCrop\"\n            :auto-crop-width=\"clipperOption.autoCropWidth\"\n            :auto-crop-height=\"clipperOption.autoCropHeight\"\n            :fixed-box=\"clipperOption.fixedBox\"\n          />\n        </div>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" @click=\"cropperShow = false\">关闭</el-button>\n        <el-button size=\"small\" type=\"primary\" @click=\"handleCropper\">确定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { getObjectURL } from \"@/utils/fileHelper\";\nimport { mapGetters } from \"vuex\";\n// 压缩插件\nimport ImageCompressor from \"image-compressor.js\";\n// 插件插件\nimport { VueCropper } from \"vue-cropper\";\n\nexport default {\n  components: {\n    VueCropper,\n  },\n  props: {\n    // 展示的类型\n    // text/picture/picture-card/\n    listType: {\n      type: String,\n      default: \"text\",\n    },\n    // 是否裁剪\n    isClipper: {\n      type: Boolean,\n      default: false,\n    },\n    limit: {\n      type: Number,\n      default: 9999,\n    },\n    defaultImagesFileData: {\n      type: Array,\n      default: (_) => [],\n    },\n    readonly: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      fileList: [], // 列表展示数据\n      fileData: [], // 传出去的数据\n      dialogVisible: false,\n      initialIndex: 0,\n      previewList: [], // 预览图片数组\n      cropperShow: false,\n      // 图片裁剪参数\n      clipperOption: {\n        img: \"\", // 图片地址\n        outputSize: 1, // 剪切后的图片质量（0.1-1）\n        outputType: \"png\",\n        autoCrop: true,\n        autoCropWidth: 375,\n        autoCropHeight: 375,\n        fixedBox: true,\n      },\n      fileOption: {}, // 文件信息\n      percentage: 0, // 进度信息\n      isProgressShow: false,\n    };\n  },\n  computed: {\n    ...mapGetters([\"baseUrl\"]),\n  },\n  watch: {\n    defaultImagesFileData(n, o) {\n      this.dataInit(n);\n      this.$emit(\"change\", this.fileData);\n    },\n  },\n  mounted() {\n    this.dataInit(this.defaultImagesFileData);\n  },\n  methods: {\n    dataInit(list) {\n      const previewList = [];\n      const defaultImages = JSON.parse(JSON.stringify(list));\n      defaultImages.forEach((image) => {\n        image.url = this.baseUrl + image.fileUrl;\n        previewList.push(image.url);\n      });\n      this.fileList = defaultImages || [];\n      this.fileData = JSON.parse(JSON.stringify(list));\n      this.previewList = previewList;\n    },\n    beforeUpload(file) {\n      // 数量限制\n      if (this.fileList.length >= this.limit) {\n        this.$message.error(\"超出最大上传数量\");\n        this.fileList.pop();\n        this.previewList.pop();\n        return;\n      }\n    },\n    upload(file) {\n      if (this.fileList.length >= this.limit) {\n        return;\n      }\n      const originSize = file.file.size / 1024;\n      const compressFile = file.file;\n      if (originSize > 500) {\n        // 大于500 自动压缩\n        this.$refs.upload.uploadFiles.pop(); // 调用内部组件的数组 解决裁剪时的显示问题\n        this.imageCompress(compressFile).then((res) => {\n          if (this.isClipper) {\n            this.imageClipper(res);\n          } else {\n            this.handleUpload(file);\n          }\n        });\n      } else {\n        this.$refs.upload.uploadFiles.pop();\n        if (this.isClipper) {\n          // 是否需要裁剪，不需要的话直接上传\n          this.imageClipper(compressFile);\n        } else {\n          this.handleUpload(file);\n        }\n      }\n    },\n    // 上传操作\n    handleUpload(file) {\n      this.fileUpload(file.file).then((res) => {\n        this.fileList.push(res);\n        this.previewList.push(getObjectURL(file.file));\n        this.$emit(\"change\", this.fileData);\n      });\n    },\n    // 裁剪处理\n    imageClipper(file) {\n      this.cropperShow = true;\n      // 图片地址转换\n      const url = getObjectURL(file);\n      this.clipperOption.img = url;\n      this.fileOption = {\n        type: file.type,\n        name: file.name,\n      };\n    },\n    // 压缩处理\n    imageCompress(file) {\n      return new Promise((resolve, reject) => {\n        new ImageCompressor(file, {\n          mimeType: \"image/jpeg\",\n          quality: 0.3, // 图片压缩的质量\n          success(result) {\n            resolve(result);\n          },\n          error(error) {\n            reject(error);\n            console.log(error);\n          },\n        });\n      });\n    },\n    // 上传到服务器\n    fileUpload(newFile) {\n      return new Promise((resolve, reject) => {\n        let reader = new FileReader();\n        reader.readAsDataURL(newFile);\n        reader.onload = () => {\n          const fileObj = {\n            fileSize: newFile.size,\n            fileUrl: reader.result,\n            name: newFile.name,\n            url: getObjectURL(newFile),\n          };\n          this.fileData.push(fileObj);\n          resolve(fileObj);\n        }\n      });\n    },\n    handleRemove(file, fileList) {\n      const index = this.fileList.findIndex(\n        (ele) => ele.fileUrl === file.fileUrl\n      );\n      if (index !== -1) {\n        this.fileList.splice(index, 1);\n        this.previewList.splice(index, 1);\n        this.fileData.splice(index, 1);\n        this.$emit(\"change\", this.fileData);\n      }\n    },\n    // 确认裁剪\n    handleCropper() {\n      this.$refs.cropper.getCropBlob((result) => {\n        const url = window.URL.createObjectURL(result);\n        const newFile = new File([result], this.fileOption.name, {\n          type: this.fileOption.type,\n        });\n        newFile.url = url;\n        this.fileUpload(newFile).then((res) => {\n          this.previewList.push(url);\n          // this.fileList = JSON.parse(JSON.stringify(this.fileData));\n          this.fileList.push(res);\n          this.fileList.forEach((ele) => {\n            ele.name = ele.oldFileName;\n            ele.url = `${this.baseUrl}${ele.fileUrl}`;\n          });\n          this.cropperShow = false;\n          this.$emit(\"change\", this.fileData);\n        });\n      });\n    },\n    handleClose() {\n      if (!this.fileData.length) {\n        this.fileList.pop();\n        this.previewList.pop();\n      }\n    },\n    handlePreview(file) {\n      for (let i = 0; i < this.fileList.length; i++) {\n        if (this.fileList[i].url === file.url) {\n          this.initialIndex = i;\n          break;\n        }\n      }\n      this.dialogVisible = true;\n    },\n    closeViewer() {\n      this.dialogVisible = false;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.cropper-dialog {\n  ::v-deep.el-dialog__close {\n    font-size: 20px;\n    line-height: 1px;\n  }\n  ::v-deep.el-dialog__header {\n    padding: 10px;\n    border-bottom: 1px solid #e5e5e5;\n  }\n}\n::v-deep.el-upload--picture-card {\n  border: none;\n}\n::v-deep.el-upload-dragger {\n  width: 146px;\n  height: 146px;\n  line-height: 146px;\n}\n::v-deep.el-upload-list__item,\n::v-deep.el-upload--picture-card {\n  width: 146px;\n  height: 146px;\n}\n::v-deep.el-upload-list__item {\n  i {\n    font-size: 22px;\n  }\n}\n::v-deep .el-upload-list__item.is-success .el-upload-list__item-status-label {\n  display: none;\n}\n.readonly {\n  ::v-deep .el-upload--picture-card {\n    display: none;\n  }\n  ::v-deep .el-upload-list__item-actions {\n    .el-upload-list__item-delete {\n      display: none;\n    }\n  }\n}\n.readonly1 {\n  ::v-deep .el-upload--picture-card {\n    display: none;\n  }\n}\n::v-deep .el-image-viewer__canvas {\n  width: 50%;\n  height: 50%;\n  margin: 200px auto;\n}\n.cropper-content {\n  padding: 0px 20px 20px;\n  display: flex;\n  justify-content: center;\n  .cropper {\n    width: 500px;\n    height: 500px;\n  }\n  .show-preview {\n    flex: 1;\n    -webkit-flex: 1;\n    display: flex;\n    display: -webkit-flex;\n    justify-content: center;\n    -webkit-justify-content: center;\n    .preview {\n      overflow: hidden;\n      border-radius: 50%;\n      border: 1px solid #cccccc;\n      background: #cccccc;\n      margin-left: 40px;\n    }\n  }\n}\n\n@media screen and (max-width: 1919px) {\n  ::v-deep .el-upload--picture-card {\n    ::v-deep .el-upload-dragger {\n      width: 86px;\n      height: 86px;\n      line-height: 86px;\n    }\n    ::v-deep .el-upload-list__item,\n    ::v-deep .el-upload--picture-card {\n      width: 86px;\n      height: 86px;\n      line-height: 86px;\n    }\n    ::v-deep .el-upload-list__item {\n      i {\n        font-size: 22px;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./local.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./local.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./local.vue?vue&type=template&id=6c5bd1c1&scoped=true&\"\nimport script from \"./local.vue?vue&type=script&lang=js&\"\nexport * from \"./local.vue?vue&type=script&lang=js&\"\nimport style0 from \"./local.vue?vue&type=style&index=0&id=6c5bd1c1&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c5bd1c1\",\n  null\n  \n)\n\nexport default component.exports","<!--\r\n * @Author: huangyh\r\n * @Date: 2022-01-04 10:45:29\r\n * @LastEditors: huangyh\r\n * @LastEditTime: 2022-03-07 14:53:17\r\n-->\r\n<template>\r\n  <div class=\"mainPanel\">\r\n    <el-form :model=\"orderForm\" ref=\"orderForm\" label-width=\"120px\" :rules=\"orderFormRules\">\r\n      <el-row type=\"flex\" align=\"middle\">\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"客户名称：\" prop=\"customerName\">\r\n            <el-input placeholder=\"请输入内容\" v-model=\"orderForm.customerName\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row type=\"flex\" align=\"middle\">\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"联系人：\" prop=\"contactName\">\r\n            <el-input placeholder=\"请输入内容\" v-model=\"orderForm.contactName\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row type=\"flex\" align=\"middle\">\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"联系电话：\" prop=\"contactPhone\">\r\n            <el-input placeholder=\"请输入内容\" v-model=\"orderForm.contactPhone\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row type=\"flex\" align=\"middle\">\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"服务地址：\" prop=\"address\">\r\n            <el-input placeholder=\"请输入内容\" v-model=\"orderForm.address\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row type=\"flex\" align=\"middle\">\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"详细地址：\">\r\n            <el-input placeholder=\"请输入内容\" v-model=\"orderForm.detailAdd\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row type=\"flex\" align=\"middle\">\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"工单标题：\" prop=\"title\">\r\n            <el-input placeholder=\"请输入内容\" v-model=\"orderForm.title\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row type=\"flex\" align=\"middle\">\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"服务项目：\" prop=\"category\">\r\n            <el-input placeholder=\"请输入内容\" v-model=\"orderForm.category\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row type=\"flex\" align=\"middle\">\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"选择设备：\" prop=\"deviceId\">\r\n            <el-select v-model=\"orderForm.deviceId\" style=\"width:100%\">\r\n              <el-option v-for=\"item in deviceList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row type=\"flex\" align=\"middle\">\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"预约时间：\" prop=\"appointsTime\">\r\n            <el-date-picker style=\"width:100%;\" v-model=\"orderForm.appointsTime\" value-format=\"yyyy-MM-dd HH:mm:ss\" type=\"datetime\" placeholder=\"选择日期时间\"></el-date-picker>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row type=\"flex\" align=\"middle\">\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"工单优先级：\" prop=\"priority\">\r\n            <el-radio-group v-model=\"orderForm.priority\">\r\n              <el-radio label=\"一般\">一般</el-radio>\r\n              <el-radio label=\"紧急\">紧急</el-radio>\r\n              <el-radio label=\"非常紧急\">非常紧急</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row type=\"flex\" align=\"middle\">\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"详细描述：\" prop=\"content\">\r\n            <el-input placeholder=\"请输入内容\" type=\"textarea\" v-model=\"orderForm.content\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row type=\"flex\" align=\"middle\">\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"图片描述：\">\r\n            <ImageUpload @change=\"orderForm.imgs = $event\" />\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row type=\"flex\" align=\"middle\">\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"工单标签：\">\r\n            <el-checkbox-group v-model=\"orderForm.label\">\r\n              <el-checkbox label=\"厦门\"></el-checkbox>\r\n              <el-checkbox label=\"已结款\"></el-checkbox>\r\n              <el-checkbox label=\"未结款\"></el-checkbox>\r\n              <el-checkbox label=\"已收预付款\"></el-checkbox>\r\n              <el-checkbox label=\"已付款\"></el-checkbox>\r\n            </el-checkbox-group>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"onSubmit\">立即创建</el-button>\r\n        <el-button>取消</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport ImageUpload from \"../../plugins/ImageUpload/local\";\r\nimport { mapGetters } from 'vuex'\r\nimport { parseTime } from \"../../utils/index\"\r\nexport default {\r\n  components: {\r\n    ImageUpload,\r\n  },\r\n  data() {\r\n    return {\r\n      orderForm: {\r\n        customerName: \"\",\r\n        contactName: \"\",\r\n        contactPhone: \"\",\r\n        address: \"\",\r\n        detailAdd: \"\",\r\n        title: \"\",\r\n        category: \"\",\r\n        appointsTime: \"\",\r\n        priority: \"\",\r\n        content: \"\",\r\n        imgs: [],\r\n        label: [],\r\n        deviceId: ''\r\n      },\r\n      orderFormRules: {\r\n        customerName: [\r\n          { required: true, message: \"客户名称\", trigger: \"blur\" },\r\n        ],\r\n        contactName: [{ required: true, message: \"联系人\", trigger: \"blur\" }],\r\n        contactPhone: [\r\n          { required: true, message: \"联系电话\", trigger: \"blur\" },\r\n        ],\r\n        address: [{ required: true, message: \"服务地址\", trigger: \"blur\" }],\r\n        title: [{ required: true, message: \"工单标题\", trigger: \"blur\" }],\r\n        appointsTime: [\r\n          { required: true, message: \"预约时间\", trigger: \"change\" },\r\n        ],\r\n        deviceId: [\r\n          { required: true, message: \"选择设备\", trigger: \"change\" },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    if(this.$route.query.device != undefined){\r\n      this.orderForm.deviceId = this.$route.query.device;\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      visitedRoutes: 'visitedRoutes',\r\n      userInfo: 'userInfo',\r\n      deviceList: 'deviceList'\r\n    })\r\n  },\r\n  methods: {\r\n    onSubmit() {\r\n      this.$refs.orderForm.validate(async (valid) => {\r\n        if (valid) {\r\n          let id = this.generateUUID();\r\n          this.orderForm['id'] = id;\r\n          this.orderForm['createTime'] = parseTime(new Date());\r\n          this.orderForm['assigners'] = [];\r\n          this.orderForm['creater'] = this.userInfo.name;\r\n          // this.orderForm['coordinationers'] = [];\r\n          this.$store.commit('demo/PUSH_ORDERLIST',this.orderForm);\r\n          this.$store.commit('demo/UPDATE_LOGOBJ', {\r\n            title: \"创建工单\",\r\n            date: this.orderForm['createTime'],\r\n            des: this.userInfo.name + \"创建了新工单\",\r\n            orderId: id\r\n          });\r\n          this.$store.commit('demo/UPDATE_DEVICELIST', {\r\n            state: 2,\r\n            id: this.orderForm.deviceId\r\n          });\r\n          let device = this.deviceList.filter(i=>i.id == this.orderForm.deviceId)[0];\r\n          this.$store.commit('demo/UPDATE_DEVICELOGOBJ', {\r\n            title: \"维修日志\",\r\n            date: this.orderForm['createTime'],\r\n            data: device,\r\n            deviceId: this.orderForm.deviceId,\r\n            orderId: id\r\n          });\r\n          let view;\r\n          let tabActive = this.$route.path\r\n          this.visitedRoutes.forEach((item, index) => {\r\n            if (tabActive == item.path) {\r\n              view = item;\r\n            }\r\n          });\r\n          await this.$store.dispatch(\r\n            'tabsBar/delRoute',\r\n            view\r\n          );\r\n          this.$router.push({\r\n            path: '/workOrder/assign'\r\n          })\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    generateUUID() {\r\n      var d = new Date().getTime();\r\n      if (window.performance && typeof window.performance.now === \"function\") {\r\n        d += performance.now(); //use high-precision timer if available\r\n      }\r\n      var uuid = \"xxxxxxxxxxxxxxxyxxxxxxxxxxxxxxx\".replace(\r\n        /[xy]/g,\r\n        function (c) {\r\n          var r = (d + Math.random() * 16) % 16 | 0;\r\n          d = Math.floor(d / 16);\r\n          return (c == \"x\" ? r : (r & 0x3) | 0x8).toString(16);\r\n        }\r\n      );\r\n      return uuid;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.mainPanel {\r\n  padding-left: 30px;\r\n  height: 100%;\r\n  overflow: auto;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Update.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Update.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Update.vue?vue&type=template&id=1cb93edd&scoped=true&\"\nimport script from \"./Update.vue?vue&type=script&lang=js&\"\nexport * from \"./Update.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Update.vue?vue&type=style&index=0&id=1cb93edd&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1cb93edd\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./local.vue?vue&type=style&index=0&id=6c5bd1c1&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Update.vue?vue&type=style&index=0&id=1cb93edd&lang=scss&scoped=true&\"","export function getVideoBase64(url) {\n  return new Promise(function(resolve, reject) {\n    let dataURL = '';\n    const video = document.createElement('video');\n    video.setAttribute('crossOrigin', 'anonymous'); // 处理跨域\n    video.setAttribute('src', url);\n    video.setAttribute('width', 420);\n    video.setAttribute('height', 360);\n    video.muted = true;\n    video.addEventListener('loadeddata', function() {\n      setTimeout(() => {\n        const canvas = document.createElement('canvas');\n        const width = video.width; // canvas的尺寸和图片一样\n        const height = video.height;\n        canvas.width = width;\n        canvas.height = height;\n        canvas.getContext('2d').drawImage(video, 0, 0, width, height); // 绘制canvas\n        dataURL = canvas.toDataURL('image/jpeg'); // 转换为base64\n        video.pause();\n        resolve(dataURL);\n      }, 200);\n    });\n    video.play();\n  });\n}\nexport function getObjectURL(file) {\n  var url = null;\n  if (window.createObjectURL != undefined) {\n    // basic\n    url = window.createObjectURL(file);\n  } else if (window.URL != undefined) {\n    // mozilla(firefox)\n    url = window.URL.createObjectURL(file);\n  } else if (window.webkitURL != undefined) {\n    // webkit or chrome\n    url = window.webkitURL.createObjectURL(file);\n  }\n  return url;\n}\nexport function dataURItoBlob(base64Data) {\n  let byteString;\n  if (base64Data.split(',')[0].indexOf('base64') >= 0) { byteString = atob(base64Data.split(',')[1]); } else byteString = unescape(base64Data.split(',')[1]);\n  const mime = base64Data\n    .split(',')[0]\n    .split(':')[1]\n    .split(';')[0];\n  const ia = new Uint8Array(byteString.length);\n  for (var i = 0; i < byteString.length; i++) {\n    ia[i] = byteString.charCodeAt(i);\n  }\n  return new Blob([ia], { type: mime });\n}\n"],"sourceRoot":""}