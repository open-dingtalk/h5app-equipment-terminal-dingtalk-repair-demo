(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ff57cae"],{"05ea":function(e,t,a){},6387:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"mainPanel",staticClass:"mainPanel"},[a("div",{ref:"searchPanel",staticClass:"searchPanel"},[a("el-form",{ref:"searchForm",attrs:{inline:!0,size:"small",model:e.searchForm}},[a("el-form-item",{attrs:{label:"设备编号：",prop:"id"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"tablePanel",style:{height:e.tableHeight+"px"}},[a("el-table",{staticClass:"tableGrow",staticStyle:{width:"100%"},attrs:{data:e.dataList,height:"100%"}},[a("el-table-column",{attrs:{label:"操作","min-width":"80",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[3==t.row.state?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleWorkOrder(t.row)}}},[e._v("创建工单")]):a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.setAbnormal(t.row)}}},[e._v("置为异常")])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"设备名称","show-overflow-tooltip":"","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.handleDetail(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"id","show-overflow-tooltip":"",label:"设备编号","min-width":"200"}}),a("el-table-column",{attrs:{prop:"state","show-overflow-tooltip":"",label:"设备状态","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.deviceState[t.row.state]))]}}])}),a("el-table-column",{attrs:{prop:"type",label:"机型","min-width":"140"}}),a("el-table-column",{attrs:{prop:"position","show-overflow-tooltip":"",label:"设备位置","min-width":"200"}})],1)],1),a("div",{staticClass:"pagePanel"},[a("el-pagination",{attrs:{background:"","current-page":e.pageInfo.pageNum,"page-sizes":[10,20,30,40],"page-size":e.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"update:currentPage":function(t){return e.$set(e.pageInfo,"pageNum",t)},"update:current-page":function(t){return e.$set(e.pageInfo,"pageNum",t)},"update:pageSize":function(t){return e.$set(e.pageInfo,"pageSize",t)},"update:page-size":function(t){return e.$set(e.pageInfo,"pageSize",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},i=[],r=a("5530"),o=(a("ac1f"),a("841c"),a("4de4"),a("caad"),a("2532"),a("2f62")),s=a("0cd6"),l=a.n(s),c=(a("ed08"),{components:{},filters:{},data:function(){return{pageInfo:{pageNum:1,pageSize:10},total:0,dataList:[],tableHeight:0,searchForm:{id:""},deviceState:{1:"正常",2:"检修中",3:"异常"}}},computed:Object(r["a"])({},Object(o["b"])(["deviceList"])),created:function(){console.log("AutoConsole: deviceList",this.deviceList),this.getList()},mounted:function(){var e=this;this.tableHeight=this.$refs.mainPanel.clientHeight-this.$refs.searchPanel.clientHeight-90,window.onresize=function(){return function(){e.tableHeight=e.$refs.mainPanel.clientHeight-e.$refs.searchPanel.clientHeight-90}()}},beforeDestroy:function(){window.onresize=null},methods:{paging:function(e,t,a){if(!e)return[];var n=l.a.drop(e,a*(t-1)),i=l.a.take(n,a);return i},handleSizeChange:function(e){this.pageInfo.pageNum=1,this.getList()},handleCurrentChange:function(e){this.pageInfo.pageNum=e,this.getList()},search:function(){this.pageInfo.pageNum=1,this.getList()},resetForm:function(){this.$refs.searchForm.resetFields(),this.search()},getList:function(){var e=this,t=this.deviceList.filter((function(t){return t.id.includes(e.searchForm.id)}));this.dataList=this.paging(t,this.pageInfo.pageNum,this.pageInfo.pageSize),this.total=t.length},handleDetail:function(e){this.$router.push({name:"deviceDetail",params:{id:e.id}})},handleWorkOrder:function(e){this.$router.push({name:"WorkOrderCreate",query:{device:e.id}})},setAbnormal:function(e){this.$store.commit("demo/UPDATE_DEVICELIST",{state:3,id:e.id}),this.search()}}}),u=c,h=(a("b65f"),a("2877")),p=Object(h["a"])(u,n,i,!1,null,"2f0d28b0",null);t["default"]=p.exports},b65f:function(e,t,a){"use strict";a("05ea")}}]);
//# sourceMappingURL=chunk-1ff57cae.05df388f.js.map