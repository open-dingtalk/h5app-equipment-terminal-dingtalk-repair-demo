{"version":3,"sources":["webpack:///./src/views/Device/Index.vue?4ada","webpack:///src/views/Device/Index.vue","webpack:///./src/views/Device/Index.vue?674f","webpack:///./src/views/Device/Index.vue","webpack:///./src/views/Device/Index.vue?294f"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","attrs","searchForm","model","value","callback","$$v","$set","expression","on","search","_v","resetForm","style","height","tableHeight","staticStyle","dataList","scopedSlots","_u","key","fn","scope","row","state","$event","handleWorkOrder","setAbnormal","handleDetail","_s","name","deviceState","pageInfo","pageNum","pageSize","total","handleSizeChange","handleCurrentChange","staticRenderFns","components","filters","data","id","1","2","3","computed","created","console","log","deviceList","getList","mounted","window","onresize","beforeDestroy","methods","paging","list","pageData","index","$refs","resetFields","searchData","length","$router","push","params","item","query","device","$store","commit","component"],"mappings":"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","file":"js/chunk-1ff57cae.05df388f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"mainPanel\",staticClass:\"mainPanel\"},[_c('div',{ref:\"searchPanel\",staticClass:\"searchPanel\"},[_c('el-form',{ref:\"searchForm\",attrs:{\"inline\":true,\"size\":\"small\",\"model\":_vm.searchForm}},[_c('el-form-item',{attrs:{\"label\":\"设备编号：\",\"prop\":\"id\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入\",\"clearable\":\"\"},model:{value:(_vm.searchForm.id),callback:function ($$v) {_vm.$set(_vm.searchForm, \"id\", $$v)},expression:\"searchForm.id\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")]),_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":_vm.resetForm}},[_vm._v(\"重置\")])],1)],1)],1),_c('div',{staticClass:\"tablePanel\",style:({ height: _vm.tableHeight + 'px' })},[_c('el-table',{staticClass:\"tableGrow\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.dataList,\"height\":\"100%\"}},[_c('el-table-column',{attrs:{\"label\":\"操作\",\"min-width\":\"80\",\"fixed\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.state == 3)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.handleWorkOrder(scope.row)}}},[_vm._v(\"创建工单\")]):_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.setAbnormal(scope.row)}}},[_vm._v(\"置为异常\")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"设备名称\",\"show-overflow-tooltip\":\"\",\"min-width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-link',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleDetail(scope.row)}}},[_vm._v(_vm._s(scope.row.name))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"id\",\"show-overflow-tooltip\":\"\",\"label\":\"设备编号\",\"min-width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"state\",\"show-overflow-tooltip\":\"\",\"label\":\"设备状态\",\"min-width\":\"140\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm.deviceState[scope.row.state]))]}}])}),_c('el-table-column',{attrs:{\"prop\":\"type\",\"label\":\"机型\",\"min-width\":\"140\"}}),_c('el-table-column',{attrs:{\"prop\":\"position\",\"show-overflow-tooltip\":\"\",\"label\":\"设备位置\",\"min-width\":\"200\"}})],1)],1),_c('div',{staticClass:\"pagePanel\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.pageInfo.pageNum,\"page-sizes\":[10, 20, 30, 40],\"page-size\":_vm.pageInfo.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"update:currentPage\":function($event){return _vm.$set(_vm.pageInfo, \"pageNum\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.pageInfo, \"pageNum\", $event)},\"update:pageSize\":function($event){return _vm.$set(_vm.pageInfo, \"pageSize\", $event)},\"update:page-size\":function($event){return _vm.$set(_vm.pageInfo, \"pageSize\", $event)},\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: huangyh\r\n * @Date: 2022-03-07 10:37:34\r\n * @LastEditors: huangyh\r\n * @LastEditTime: 2022-03-07 16:45:55\r\n-->\r\n<template>\r\n  <div ref=\"mainPanel\" class=\"mainPanel\">\r\n    <div ref=\"searchPanel\" class=\"searchPanel\">\r\n      <el-form ref=\"searchForm\" :inline=\"true\" size=\"small\" :model=\"searchForm\">\r\n        <el-form-item label=\"设备编号：\" prop=\"id\">\r\n          <el-input v-model=\"searchForm.id\" placeholder=\"请输入\" clearable />\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" size=\"mini\" @click=\"search\">查询</el-button>\r\n          <el-button size=\"mini\" @click=\"resetForm\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <div class=\"tablePanel\" :style=\"{ height: tableHeight + 'px' }\">\r\n      <el-table :data=\"dataList\" style=\"width: 100%\" height=\"100%\" class=\"tableGrow\">\r\n        <el-table-column label=\"操作\" min-width=\"80\" fixed>\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"text\" v-if=\"scope.row.state == 3\" @click=\"handleWorkOrder(scope.row)\">创建工单</el-button>\r\n            <el-button type=\"text\" v-else @click=\"setAbnormal(scope.row)\">置为异常</el-button>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"name\" label=\"设备名称\" show-overflow-tooltip min-width=\"200\">\r\n          <template slot-scope=\"scope\">\r\n            <el-link type=\"primary\" @click=\"handleDetail(scope.row)\">{{ scope.row.name }}</el-link>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"id\" show-overflow-tooltip label=\"设备编号\" min-width=\"200\" />\r\n        <el-table-column prop=\"state\" show-overflow-tooltip label=\"设备状态\" min-width=\"140\">\r\n          <template slot-scope=\"scope\">{{ deviceState[scope.row.state] }}</template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"type\" label=\"机型\" min-width=\"140\" />\r\n        <el-table-column prop=\"position\" show-overflow-tooltip label=\"设备位置\" min-width=\"200\" />\r\n      </el-table>\r\n    </div>\r\n    <div class=\"pagePanel\">\r\n      <el-pagination\r\n        background\r\n        :current-page.sync=\"pageInfo.pageNum\"\r\n        :page-sizes=\"[10, 20, 30, 40]\"\r\n        :page-size.sync=\"pageInfo.pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport array from \"lodash/array\";\r\nimport { parseTime } from \"../../utils/index\";\r\nexport default {\r\n  components: {},\r\n  filters: {},\r\n  data() {\r\n    return {\r\n      pageInfo: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n      },\r\n      total: 0,\r\n      dataList: [],\r\n      tableHeight: 0,\r\n      searchForm: {\r\n        id: \"\",\r\n      },\r\n      deviceState: {\r\n        1: \"正常\",\r\n        2: \"检修中\",\r\n        3: \"异常\",\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"deviceList\"]),\r\n  },\r\n  created() {\r\n    console.log(\"AutoConsole: deviceList\", this.deviceList);\r\n    this.getList();\r\n  },\r\n  mounted() {\r\n    this.tableHeight =\r\n      this.$refs.mainPanel.clientHeight -\r\n      this.$refs.searchPanel.clientHeight -\r\n      90;\r\n    window.onresize = () => {\r\n      return (() => {\r\n        this.tableHeight =\r\n          this.$refs.mainPanel.clientHeight -\r\n          this.$refs.searchPanel.clientHeight -\r\n          90;\r\n      })();\r\n    };\r\n  },\r\n  beforeDestroy() {\r\n    window.onresize = null;\r\n  },\r\n  methods: {\r\n    paging(list, pageIndex, pageSize) {\r\n      if (!list) return [];\r\n      const skipList = array.drop(list, pageSize * (pageIndex - 1));\r\n      const pageData = array.take(skipList, pageSize);\r\n      return pageData;\r\n    },\r\n    handleSizeChange(size) {\r\n      this.pageInfo.pageNum = 1;\r\n      this.getList();\r\n    },\r\n    handleCurrentChange(index) {\r\n      this.pageInfo.pageNum = index;\r\n      this.getList();\r\n    },\r\n    search() {\r\n      this.pageInfo.pageNum = 1;\r\n      this.getList();\r\n    },\r\n    resetForm() {\r\n      this.$refs.searchForm.resetFields();\r\n      this.search();\r\n    },\r\n    getList() {\r\n      let searchData = this.deviceList.filter((i) =>\r\n        i.id.includes(this.searchForm.id)\r\n      );\r\n      this.dataList = this.paging(\r\n        searchData,\r\n        this.pageInfo.pageNum,\r\n        this.pageInfo.pageSize\r\n      );\r\n      this.total = searchData.length;\r\n    },\r\n    handleDetail(item) {\r\n      this.$router.push({\r\n        name: \"deviceDetail\",\r\n        params: {\r\n          id: item.id,\r\n        },\r\n      });\r\n    },\r\n    handleWorkOrder(item) {\r\n      this.$router.push({\r\n        name: \"WorkOrderCreate\",\r\n        query: {\r\n          device: item.id,\r\n        },\r\n      });\r\n    },\r\n    setAbnormal(item) {\r\n      this.$store.commit(\"demo/UPDATE_DEVICELIST\", {\r\n        state: 3,\r\n        id: item.id,\r\n      });\r\n      this.search()\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.btnsPanel {\r\n  margin-bottom: 10px;\r\n}\r\n.previewBox {\r\n  display: flex;\r\n  & > div {\r\n    height: 600px;\r\n  }\r\n  .previewBoxLeft {\r\n    flex-grow: 1;\r\n    padding: 20px;\r\n    .previewBoxLeftTop {\r\n      border-bottom: 1px solid #e5e5e5;\r\n      padding: 0 0 20px 0;\r\n      .previewBoxLeftTopTitle {\r\n        font-size: 26px;\r\n        font-weight: bold;\r\n        line-height: 38px;\r\n      }\r\n      .previewBoxLeftTopNum {\r\n        font-size: 18px;\r\n        line-height: 38px;\r\n      }\r\n      .previewBoxLeftTopBtns {\r\n        text-align: right;\r\n        padding-right: 20px;\r\n      }\r\n    }\r\n    .previewBoxLeftBom {\r\n      padding: 20px 0 0 0;\r\n    }\r\n  }\r\n  .previewBoxRight {\r\n    flex-grow: 2;\r\n    overflow: auto;\r\n    .previewBoxRightHtml {\r\n      width: 100%;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=2f0d28b0&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=2f0d28b0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2f0d28b0\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=2f0d28b0&lang=scss&scoped=true&\""],"sourceRoot":""}